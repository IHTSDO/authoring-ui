<div>
  <div class=" row p-5 grey darken-4" style=" margin-right:0px;">
    <div class="pull-left">
      <button ng-init="isCollapsed = false" ng-click="isCollapsed = !isCollapsed" type="button"
              ng-class="[btn, btn-default, darkbuttons, grey, 'darken-4', 'toggle-buttons', md, {'md-keyboard-arrow-right' : isCollapsed, 'md-keyboard-arrow-down' : !isCollapsed}]"></button>
      <button type="button" class="btn btn-default morebuttons grey darken-4 md md-more "></button>

    </div>

    <!-- draggable element -- concept name -->
    <div class="pull-left title-text"
         ui-draggable="true" drag="getConceptIdNamePair(concept)" drag-channel="conceptPropertiesObj" drop-channel="NA">
      <button type="button" class="btn-default darkbuttons grey darken-4 "> <span class="fsn">{{concept.pt.term}}</span></button></div>
    <div class="pull-right m-l-15 m-r-15 ">
      <select name="select-primitive-choice" id="select-primitive-choice"
              class="form-control  grey darken-4 primitive">
        <option value="Choice 1">Primitive</option>
        <option value="Choice 2">Fully Defined</option>
      </select>
    </div>
    <div class="pull-right no-margin">
      <!-- TODO Fix this &#45;&#45; Note: due to weird behavior with ng-class, need to manually add bottom alignment -->
        <button type="button" class="btn-default editbuttons orange darken-3 md md-backspace"
              title="Remove Concept"></button>
      <button type="button"
              style="vertical-align: bottom"
              ng-class="[btn-default, editbuttons, md, 'md-settings-power', {green : concept.active}, {red: !concept.active}]"
              title="Active/Inactive" ng-click="toggleConceptActive(concept)"></button>
      <button type="button" class="btn-default editbuttons amber md md-undo " title="Undo Changes"></button>
      <button type="button" class="btn-default editbuttons deep-purple lighten-1 md md-history"
              title="History"></button>
      <button type="button" class="btn-default editbuttons blue md md-keyboard-return" title="Show Model"></button>
      <button type="button" class="btn-default editbuttons teal md md-save" ng-click="updateConcept(concept)" title="Save"></button>
    </div>
  </div>

  <!-- Toggle-able collapsed concept elements -->
  <div ng-show="!isCollapsed">

    <!-- rows: Concept Descriptions -->
    <div ng-repeat="description in concept.descriptions">

      <div class="row grey darken-3 p-5">
        <div class="col-md-3 no-padding">
          <div class="pull-left">
            <button class="btn-default editbuttons grey darken-3 md md-more"
                    title="Some title here"></button>
            <button type="button" class="btn-default editbuttons amber md md-undo" title="Undo Changes"></button>
            <button type="button" class="btn-default editbuttons blue accent-2 md md-history"
                    title="Undo Changes"></button>
            <!-- TODO Fix this &#45;&#45; Note: due to weird behavior with ng-class, need to manually add bottom alignment -->
            <button type="button"
                    style="vertical-align: bottom"
                    ng-click="toggleDescriptionActive(description)"
                    ng-class="[btn-default, editbuttons, md, 'md-settings-power', {green : description.active}, {red: !description.active}]"
                    title="Active/Inactive">
            </button>
          </div>
        </div>
        <div class="col-md-9 no-padding">
          <div class="pull-left description no-padding">
            <input ng-disabled="description.effectiveTime" ng-model="description.term" class="form-control color_{{relationship.group}}" type="text"
                   placeholder="Description" ui-on-drop="dropNullOp()">
          </div>
          <div class="pull-left typeid">
            <select ng-disabled="description.effectiveTime" ng-options="typeId.id as typeId.abbr for typeId in typeIds"
                    ng-model="description.typeId"
                    name="select-typeId" id="select-typeId-choice" class="form-control color_{{relationship.group}}">
            </select>
          </div>
          <div class="pull-left language">
            <select ng-disabled="description.effectiveTime"
                    ng-options="language.id as language.abbr for language in languages"
                    ng-model="description.languageCode"
                    name="select-language" id="select-language-choice" class="form-control color_{{relationship.group}}"></select>
          </div>
          <div class="pull-left acceptability">
            <select ng-disabled="description.effectiveTime"
                    ng-options="acceptability.id as acceptability.abbr for acceptability in acceptabilities"
                    ng-model="description.acceptabilityMap['900000000000508004']" name="select-acceptability"
                    id="select-acceptability-choice" class="form-control color_{{relationship.group}}">
            </select>
          </div>
          <div style="width:4%" class="pull-left">
            <button type="button" ng-click="addDescription()" class="btn-default add-buttons md md-add-circle"
                    title="Add New Description"></button>
          </div>
        </div>
      </div>
    </div>

    <!-- rows: Concept Outgoing Relationships -->
    <div ng-repeat="relationship in concept.outboundRelationships | filter:{typeId: '116680003'}">
      <div class=" row grey darken-3 p-5">

        <!-- Button controls -->
        <div class="col-md-3 no-padding pull-left">
          <button class="btn-default editbuttons grey darken-3 md md-more"
                  title="Some title here"></button>
          <button type="button" class="btn-default editbuttons amber md md-undo" title="Undo Changes">
          </button>
          <button type="button" class="btn-default editbuttons blue accent-2 md md-history" title="History">
          </button>
          <!-- TODO Fix this &#45;&#45; Note: due to weird behavior with ng-class, need to manually add bottom alignment -->
          <button type="button"
                  style="vertical-align: bottom"
                  ng-click="toggleRelationshipActive(relationship)"
                  ng-class="[btn, btn-default, editbuttons, md, 'md-settings-power', {green : relationship.active}, {red: !relationship.active}]"
                  title="Active/Inactive">
          </button>
        </div>

        <!-- relationship group -->
        <div class="pull-left rolegroup">
          <input ng-disabled="relationship.effectiveTime" ng-model="relationship.group"
                 class="form-control color_{{relationship.group}}" type="text" placeholder="#" ui-on-drop="dropNullOp()">
        </div>

        <!-- characteristic type -->
        <div class="pull-left characteristictype ">
          <select ng-disabled="relationship.effectiveTime" ng-model="relationship.characteristicType"
                  ng-options="characteristicType.id as characteristicType.abbr for characteristicType in characteristicTypes"
                  class="form-control color_{{relationship.group}}"></select>
        </div>

        <!-- linked concept and name:  droppable target for Concepts -->
        <div class="pull-left sourcename" ui-draggable="true" drag="getConceptIdNamePairFromRelationshipTarget(relationship)" drag-channel="conceptPropertiesObj" drop-channel="conceptPropertiesObj"
             ui-on-drop="dropRelationshipTarget(relationship, $data)">
          <input disabled ng-model="relationship.destinationName" class="form-control color_{{relationship.group}}"
                 type="text" placeholder="#">
        </div>

        <!-- add relationship -->
        <div style="width:4%" class="pull-left">
          <button type="button" ng-click="addIsaRelationship()"
                  class="btn-default add-buttons grey darken-3 md md-add-circle"
                  title="Add New Relationship"></button>
        </div>
      </div>
    </div>

    <!-- rows: Concept Attributes (in outboundRelationships) -->
    <div ng-repeat="relationship in concept.outboundRelationships | filter:{typeId: '!116680003'}">
      <div class=" row grey darken-3 p-5">

        <!-- Button controls -->
        <div class="col-md-3 no-padding">
          <div class="pull-left">
            <button class="btn-default editbuttons grey darken-3 md md-more"
                    title="Some title here"></button>

            <button type="button" class="btn-default editbuttons amber md md-undo" title="Undo Changes"></button>
            <button type="button" class="btn-default editbuttons blue accent-2 md md-history" title="History"></button>
            <!-- TODO Fix this   Note: due to weird behavior with ng-class, need to manually add bottom alignment -->
            <button type="button"
                    style="vertical-align: bottom"
                    ng-click="toggleRelationshipActive(relationship)"
                    ng-class="[btn, btn-default, editbuttons, md, 'md-settings-power', {green : relationship.active}, {red: !relationship.active}]"
                    title="Active/Inactive">
            </button>
          </div>
        </div>

        <!-- relationship group -->
        <div class="pull-left rolegroup">
          <input ng-disabled="relationship.effectiveTime" ng-model="relationship.group"
                 class="form-control color_{{relationship.group}}" type="text" placeholder="#" ui-on-drop="dropNullOp()">
        </div>

        <!-- attribute type -->
        <div class="pull-left sourcename" ui-draggable="true" drag="getConceptIdNamePairFromAttributeType(relationship)" drag-channel="conceptPropertiesObj" drop-channel="conceptPropertiesObj"
             ui-on-drop="dropAttributeType(relationship, $data)">
          <input ng-disabled="relationship.effectiveTime" ng-model="relationship.typeName"
                 class="form-control color_{{relationship.group}}"
                 type="text"
                 placeholder="#">
        </div>

        <!-- linked concept -->
        <div class="pull-left sourcename" ui-draggable="true" drag="getConceptIdNamePairFromRelationshipTarget(relationship)" drag-channel="conceptPropertiesObj" drop-channel="conceptPropertiesObj"
        ui-on-drop="dropRelationshipTarget(relationship, $data)">
          <input ng-disabled="relationship.effectiveTime" ng-model="relationship.destinationName"
                 class="form-control color_{{relationship.group}}"
                 type="text"
                 placeholder="#">
         </div>

        <div style="width:4%" class="pull-left">
          <button type="button" ng-click="addAttributeRelationship()" class="btn-default add-buttons grey  md md-add-circle"
                  title="Add New Attribute"></button>
        </div>
      </div>
    </div>
  </div>
</div>
