<div id="inactivateComponentModal">

  <div class="modal-header">
    <button type="button" class="close" ng-click="cancel()">&times;</button>
    <h4 class="modal-title">Select Reason For Inactivating {{componentType}}</h4>
  </div>


  <div class="modal-body">

    <!-- Display if concept cannot be activated due to stated parent condition -->
    <div class="alert alert-warning p-10" ng-if="statedChildrenFound">
      Cannot inactivate concept:  Concept is a stated parent.
    </div>

    <div class="row classification-report ">
      <ul style="display: inline; border-bottom: 0px;" class="nav nav-tabs" role="tablist">

      <li role="presentation" ng-class="{active : actionTab === 1}" class=""><a style="margin: 0px"
                                                                                ng-click="actionTab=1"
                                                                                aria-controls="home" role="tab"
                                                                                data-toggle="tab"> Inactivation
                                                                                                   Reason</a></li>
      <li role="presentation" ng-show="conceptId" ng-class="{active : actionTab === 2}" class=""><a
        ng-click="actionTab=2" aria-controls="home"
        role="tab"
        data-toggle="tab">Children
                          ({{!inboundRelationshipsLoading ?
                          children.length : 'Loading'}})</a>
      </li>

      <li role="presentation" ng-show="conceptId" ng-class="{active : actionTab === 3}" class=""><a
        ng-click="actionTab=3" aria-controls="home"
        role="tab"
        data-toggle="tab">Descendants ({{!descendantsLoading
                          ? descendants.total :
                          'Loading'}})</a>
      </li>

      <li role="presentation" ng-show="conceptId" ng-class="{active : actionTab === 4}" class=""><a
        ng-click="actionTab=4" aria-controls="home"
        role="tab"
        data-toggle="tab">All Incoming
                          ({{!inboundRelationshipsLoading
                          ? inboundRelationshipsTotal :
                          'Loading'}})</a>
      </li>
      </ul>
    </div>




    <!-- Tab panes -->
    <div class="tab-content row m-t-10 col-sm-12 no-padding">

      <!-- reasons select -->
      <div role="tabpanel" class="tab-pane " ng-class="{active: actionTab==1}">
        <div class="row col-md-12 no-padding top-modal add-triangles-bottom">


          <div class="col-md-12 ">
            <label> Select Inactivation Reason </label>
          </div>
          <div class="col-md-12">
            <select id="taskProject" name="select-reason" class="form-control"
                    ng-options="reason as reason.text for reason in reasons"
                    ng-model="reason">
              <option value="disabled">- Select a reason (required) -</option>
            </select>
          </div>
        </div>

        <div class="col-sm-12 no-padding  add-color" ng-if="componentType === 'Concept'">


          <div class="row p-t-10">
            <div class="col-md-4">
              <label> Association Type </label>
            </div>
            <div class="col-md-6">
              <label> Concept</label>
            </div>
          </div>

          <div class="row" style="border-top:grey solid 1px;" ng-repeat="association in associations">
            <div class="col-md-4">
              <select class="form-control"
                      ng-options="type as type.text for type in associationTargets"
                      ng-model="association.type">
                <option value="disabled">- Select an Association Type (optional) -</option>
              </select>
            </div>
            <div class="col-md-6">
              <textarea type="text" class="form-control"
                        ng-model="association.concept"
                        typeahead="suggestion as (suggestion.concept.fsn + ' (' + suggestion.concept.conceptId + ')') for suggestion in getConceptsForTypeahead($viewValue)"
                        typeahead-focus-first="false"
                        typeahead-wait-ms="500"
                        typeahead-editable="false" typeahead-min-length="3"
                        placeholder="Type to select an associated concept..."></textarea>

            </div>
            <div class="col-md-12">
              <button type="button" ng-click="addAssociation($index)"
                      class="btn-default add-buttons md fa fa-plus button-width-plus pull-right tooltips-left tooltips-light normal-case">
                <span>Add Association</span></button>


              <button type="button" ng-click="removeAssociation($index)"
                      class="btn-default add-buttons md fa fa-minus button-width-minus pull-right tooltips-left tooltips-light normal-case">
                <span>Remove Association</span></button>
            </div>
          </div>
        </div>
        <div class="row col-md-12 no-padding top-modal">
          <button type="button"
                  class="btn btn-default amber inactivation-button-modal m-t-20"
                  ng-click="selectReason()"
                  ng-if="!inboundRelationshipsLoading && !statedChildrenFound || componentType !== 'Concept'"><span
            class="md md-settings-power  amber darken-3 iconbase"></span>

            <span class="button-link">Inactivate {{componentType}}</span>
          </button>

        </div>


      </div>


      <!-- children -->
      <div role="tabpanel" class="tab-pane" ng-class="{active: actionTab==2}">
        <table ng-table="tableParamsChildren" template-pagination="utilities/data-table-pager.html"
               class="table table-full-small">
          <tr ng-repeat="item in $data">
            <td data-title="'Characteristic Type'" sortable="'characteristicType'">
              {{item.characteristicType === 'STATED_RELATIONSHIP' ? 'Stated' : 'Inferred'}}
            </td>
            <td data-title="'FSN'" sortable="'sourceFsn'">
              {{item.sourceFsn}}
            </td>

          </tr>
        </table>
      </div>

      <!-- descendants -->
      <div role="tabpanel" class="tab-pane" ng-class="{active: actionTab==3}">
        <div ng-show="descendants.total > 200" class="alert alert-info">Limiting displayed results to {{tableLimit}}
                                                                        items
        </div>
        <table ng-table="tableParamsDescendants" template-pagination="utilities/data-table-pager.html"
               class="table table-full-small">
          <tr ng-repeat="item in $data">
            <td data-title="'FSN'" sortable="'sortableName'">
              {{item.sortableName}}
            </td>
          </tr>
        </table>
      </div>

      <!-- all inbound relationships -->
      <div role="tabpanel" class="tab-pane" ng-class="{active: actionTab==4}">
        <div ng-show="inboundRelationshipsTotal > 200" class="alert alert-info">Limiting displayed results to
                                                                                {{tableLimit}} items
        </div>
        <table ng-table="tableParamsInboundRelationships" template-pagination="utilities/data-table-pager.html"
               class="table table-full-small">
          <tr ng-repeat="item in $data">
            <td data-title="'Characteristic Type'" sortable="'characteristicType'">
              {{item.characteristicType === 'STATED_RELATIONSHIP' ? 'Stated' : 'Inferred'}}
            </td>
            <td data-title="'Type'" sortable="'typeFsn'">
              {{item.typeFsn}}
            </td>
            <td data-title="'FSN'" sortable="'sourceFsn'">
              {{item.sourceFsn}}
            </td>
          </tr>
        </table>

        <div class="p-20">Note: Inactive relationships are not shown, but are included in the total count.</div>

      </div>


    </div>

  </div>

  <div class="modal-footer">

  </div>

</div>