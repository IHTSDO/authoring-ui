<section class="tables-data conflicts">

  <!-- for ng-table checkboxes -->

  <style>
    .conflicts-report-header {
    }

    .conflicts-report .checkbox input[type=checkbox]:after, .conflicts-report .checkbox-inline input[type=checkbox]:after, .conflicts-report input[type=checkbox]:after {
      content: "";
      display: block;
      width: 20px;
      height: 20px;
      margin-top: -2px;
      margin-right: 5px;
      border: 1px solid #DBDBDB;
      border-radius: 2px;
      transition: 240ms;
    }

    .checkbox input[type=checkbox], .checkbox-inline input[type=checkbox], label input[type=checkbox] {
      margin-left: -33px;
    }

    .col-checkbox {
      width: 10%;
    }

    .col-concept {
      width: 80%;
    }

    .col-controls {
      width: 10%;
      padding-right: 0px;
    }

    .h-45 {
      height: 45px;
    }

    .conflicts table {
      min-height: 300px;
    }

    .add-shadow {
      box-shadow: inset 12px 0px 22px -14px #ABABAB;
      -webkit-box-shadow: inset 12px 0px 22px -14px #ABABAB;
      -moz-box-shadow: inset 12px 0px 22px -14px #ABABAB;
      -o-box-shadow: inset 12px 0px 22px -14px #ABABAB;
      background-color: #fff;
      padding: 5px !important;
    }

    input.conflicts-search {
      margin: 0px 4%;
      padding: 5px 0px;
      width: 92%;
    }

    .conflicts .btn-group, .conflicts .btn-toolbar {
      margin-left: 0px;
    }

    .conflicts .ta-scroll-window {
      margin-left: 0px;
    }

    .conflicts-header {
      background-color: #fbfbfb;
      border-top: solid 1px #ececec;
      border-bottom: solid 1px #ececec;
    }

    .conflicts-tabs {
      background-color: #fafafa;
    }

    .conflicts-tabs .nav-tabs ul {
      padding: 0px;
      box-shadow: inset 0 -2px 0 #dcdcdc !important;
      width: 100%;
    }

    .conflicts-window {
      background-color: #E7E7E7;
      height: 100%;
    }

    section thead input {
      background-color: #fff;
    }
  </style>


  <script type="text/ng-template" id="ng-table/headers/checkboxHeader.html">
    <input type="checkbox" ng-model="checkAll" ng-change="selectAll(checkAll)"
           id="select_all_to_review"
           name="filter-checkbox" value=""/>
  </script>

  <div class="row no-gutter no-padding">

    <div class="col-md-12 no-padding no-gutter">

      <!-- Conflicts Report: Sidebar -->
      <div ng-if="!hideSidebar" class="col-md-3 no-padding no-gutter">

        <div ng-if="!conflicts" class="alert alert-warning">Loading conflicts...</div>

        <div ng-if="conflicts" class="row no-padding no-gutter" style="text-align: center">
          <div class="col-md-12">

            <!-- Hide sidebar control -->

            <h4>Conflicts <button type="button" ng-click="toggleSidebar()" class="md md-keyboard-arrow-left pull-left " title="Hide Sidebar"></button></h4></div>
        </div>

        <table show-filter="false" ng-table="conflictsTableParams" ng-if="conflicts"
               template-pagination="utilities/data-table-pager.html"
               class="table table-full table-full-small" drop-channel="feedbackConcept">


          <tr ng-repeat="concept in conflicts">

            <!-- Checkbox control -->
            <td class="col-checkbox col-md-1" header="'ng-table/headers/checkboxHeader.html'">
              <input type="checkbox" ng-model="concept.selected" ui-on-drop="">
            </td>

            <!-- Fsn -->
            <td class="col-concept col-md-10" data-title="'Concept'" sortable="'fsn'">
              Concept: {{concept.fsn}}
            </td>

            <!-- Controls -->
            <td class="col-controls col-md-1">
              <button class="btn btn-round btn-default blue lighten-2" title=""
                      ng-disabled="isEditing(concept.id)"
                      ng-click="viewConflict(concept.id)"><span
                class="md md-edit "></span>
              </button>
            </td>


          </tr>
        </table>
      </div>
      <div class="no-padding no-gutter" ng-class="[{'col-md-12' : hideSidebar}, {'col-md-9' : !hideSidebar}]" ng-show="viewedMerges.length > 0">

        <div class="row no-padding no-gutter" style="text-align: center">
          <div class="col-md-4"><h4><button ng-show="hideSidebar" ng-click = "toggleSidebar()" type="button" class="md md-keyboard-arrow-right pull-left " title="Show Sidebar"></button>Project Version</h4></div>
          <div class="col-md-4"><h4>Merged Version</h4></div>
          <div class="col-md-4"><h4>Task Version</h4></div>
        </div>

        <div class="row no-padding no-gutter" ng-repeat="merge in viewedMerges">
          <div class="col-md-4">
            <div concept-edit concept="viewedMerges[$index].source"
                 branch="targetBranch" static="true" component-styles="merge.styles.source">
            </div>
          </div>

          <div class="col-md-4">
            <div concept-edit concept="viewedMerges[$index].merged" branch="sourceBranch" static="false"
              component-styles="merge.styles.merged" save-function="conceptUpdateFunction(project, task, concept)"></div>

          </div>
          <div class="col-md-4">
            <div concept-edit concept="viewedMerges[$index].target"
                 branch="sourceBranch" static="true"
              component-styles="merge.styles.target">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


</section>

