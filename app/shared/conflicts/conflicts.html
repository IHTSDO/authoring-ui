<section class="tables-data conflicts">

  <!-- for ng-table checkboxes -->

  <style>
    .conflicts-report-header {
    }

    .conflicts-report .checkbox input[type=checkbox]:after, .conflicts-report .checkbox-inline input[type=checkbox]:after, .conflicts-report input[type=checkbox]:after {
      content: "";
      display: block;
      width: 20px;
      height: 20px;
      margin-top: -2px;
      margin-right: 5px;
      border: 1px solid #DBDBDB;
      border-radius: 2px;
      transition: 240ms;
    }

    .checkbox input[type=checkbox], .checkbox-inline input[type=checkbox], label input[type=checkbox] {
      margin-left: -33px;
    }

    .col-checkbox {
      width: 10%;
    }

    .col-concept {
      width: 80%;
    }

    .col-controls {
      width: 10%;
      padding-right: 0px;
    }

    .h-45 {
      height: 45px;
    }

    .conflicts table {
      min-height: 300px;
    }

    .add-shadow {
      box-shadow: inset 12px 0px 22px -14px #ABABAB;
      -webkit-box-shadow: inset 12px 0px 22px -14px #ABABAB;
      -moz-box-shadow: inset 12px 0px 22px -14px #ABABAB;
      -o-box-shadow: inset 12px 0px 22px -14px #ABABAB;
      background-color: #fff;
      padding: 5px !important;
    }

    input.conflicts-search {
      margin: 0px 4%;
      padding: 5px 0px;
      width: 92%;
    }

    .conflicts .btn-group, .conflicts .btn-toolbar {
      margin-left: 0px;
    }

    .conflicts .ta-scroll-window {
      margin-left: 0px;
    }

    .conflicts-header {
      background-color: #fbfbfb;
      border-top: solid 1px #ececec;
      border-bottom: solid 1px #ececec;
    }

    .conflicts-tabs {
      background-color: #fafafa;
    }

    .conflicts-tabs .nav-tabs ul {
      padding: 0px;
      box-shadow: inset 0 -2px 0 #dcdcdc !important;
      width: 100%;
    }

    .conflicts-window {
      background-color: #E7E7E7;
      height: 100%;
    }

    section thead input {
      background-color: #fff;
    }
  </style>

  <!-- Conflicts Report -->

  <div class="col-md-12 clearfix conflicts-header">

    <!-- Loading text:  displayed if initialization has not yet occurred -->
    <div ng-if="!conflictsInitialized" class="pull-left p-10">
      Rebase Conflicts Report: Retrieving...
    </div>

    <div ng-if="conflictsInitialized && conflictsContainer.conflicts.concepts.length > 0" class="pull-left p-10">
      Rebase Conflicts Report: {{conflictsContainer.conflicts.concepts.length}} conflict<span ng-show="conflictsContainer.conflicts.concepts.length > 1">s</span> found
    </div>

    <div ng-if="conflictsInitialized && conflictsContainer.conflicts.concepts.length === 0" class="pull-left p-10">
      Rebase Conflicts Report: No conflicts detected.
    </div>
  </div>

  <div class="col-12 no-padding">

    <ul style="display: inline; border-bottom: 0px;" class="nav nav-tabs conflicts-tabs" role="tablist"
        ng-init="actionTab=1">

      <li role="presentation" class="active">
        <a style="margin: 0"
           ng-click="actionTab=1"
           aria-controls="home"
           role="tab"
           data-toggle="tab">Conflicts ({{conflictsContainer.conflicts.conceptsToResolve.length}})</a>
      </li>
      <li role="presentation" class=""><a style="margin: 0"
                                          ng-click="actionTab=2"
                                          aria-controls="home"
                                          role="tab"
                                          data-toggle="tab">Conflicts Resolved
                                                            ({{conflictsContainer.conflicts.conceptsResolved.length}})</a>
      </li>


      <!-- Multiselect controls -->
      <div class="pull-right p-10" ng-if="editable">
        <button class="btn btn-round btn-default black" title="Group selected concepts"
                ng-click="groupSelectedConcepts(actionTab)"><span class="md md-layers "></span>
        </button>
        <button class="btn btn-round btn-default green lighten-2" title="Move selected concepts to other list"
                ng-click="moveMultipleToOtherList(actionTab)"><span
          class="md md-playlist-add "></span></button>
        <button class="btn btn-round btn-default grey lighten-2" title="Show in edit panel"
                ng-click="addMultipleToEdit(actionTab)"><span class="md md-edit "></span>
        </button>
      </div>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content row m-t-10 no-padding">

      <!-- Concepts To Resolve -->
      <div role="tabpanel" class="tab-pane" ng-class="{active: actionTab==1}">

        <table show-filter="true" ng-table="conceptsToResolveTableParams"
               template-pagination="utilities/data-table-pager.html"
               class="table table-full table-full-small">
          <tr ng-repeat="concept in $data">

            <!-- select control -->
            <td ng-if="editable" class="col-checkbox" header="'ng-table/headers/checkboxToResolve.html'">
              <input type="checkbox" ng-model="concept.selected">
            </td>

            <!-- concept term -->
            <td class="col-concept" data-title="'Concept'" sortable="'term'"
                filter="{}"
                ui-draggable="true" drag="concept"
                drag-channel="conflictsConcept" drop-channel="conflictsConcept"
                ui-on-drop="dropConcept(concept, $data, actionTab)">
              {{concept.fsn}}
            </td>
            <!--
            Commented out until project/task/author information included in conflicts report
                        &lt;!&ndash; project &ndash;&gt;
                        <td class="col-concept" data-title="'Project'" sortable="''">
                          Some Project
                        </td>

                        &lt;!&ndash; task name &ndash;&gt;
                        <td class="col-concept" data-title="'Task Name'" sortable="''">
                          Some Task
                        </td>

                        &lt;!&ndash; author &ndash;&gt;
                        <td class="col-concept" data-title="'Author'" sortable="''">
                          Some Author
                        </td>-->

            <!-- controls -->
            <td ng-if="editable" class="col-controls">

              <button class="btn btn-round btn-default green lighten-2" title=""
                      ng-click="addToResolved(concept)"><span
                class="md md-playlist-add "></span></button>
              <button class="btn btn-round btn-default grey lighten-2" title="Show in edit panel"
                      ng-click="addToEdit(concept)"><span
                class="md md-edit "></span>
              </button>
              <button class="btn btn-round btn-default blue lighten-2" title="" ng-click="showModel(concept)"><span
                class="md md-keyboard-return "></span>
              </button>
            </td>
          </tr>
        </table>
        <script type="text/ng-template" id="ng-table/headers/checkboxToResolve.html">
          <input type="checkbox" ng-model="checkedToResolve" ng-change="selectAll(actionTab, checkedToResolve)"
                 id="select_all_to_review"
                 name="filter-checkbox" value=""/>
        </script>

      </div>

      <!-- Concepts Resolved -->
      <div role="tabpanel" class="tab-pane" ng-class="{active: actionTab==2}">
        <table show-filter="true" ng-table="conceptsResolvedTableParams"
               template-pagination="utilities/data-table-pager.html"
               class="table table-full table-full-small">

          <tr ng-repeat="concept in $data">

            <!-- select control -->
            <td  ng-if="editable" class="col-checkbox" header="'ng-table/headers/checkboxResolved.html'">
              <input type="checkbox" ng-model="concept.selected">
            </td>

            <!-- concept term -->
            <td class="col-concept" data-title="'Concept'" sortable="'term'"
                filter="{}"
                ui-draggable="true" drag="concept"
                drag-channel="conflictsConcept" drop-channel="conflictsConcept"
                ui-on-drop="dropConcept(concept, $data, actionTab)">
              <button ng-show="concept.modifiedSinceResolve" class="btn btn-round btn-default blue lighten-2"
                      title="New"><span
                class="md md-grade"></span>
              </button>
              {{concept.fsn}}
            </td>

            <!--
          Commented out until project/task/author information included in conflicts report
                      &lt;!&ndash; project &ndash;&gt;
                      <td class="col-concept" data-title="'Project'" sortable="''">
                        Some Project
                      </td>

                      &lt;!&ndash; task name &ndash;&gt;
                      <td class="col-concept" data-title="'Task Name'" sortable="''">
                        Some Task
                      </td>

                      &lt;!&ndash; author &ndash;&gt;
                      <td class="col-concept" data-title="'Author'" sortable="''">
                        Some Author
                      </td>
          -->
            <!-- controls -->
            <td ng-if="editable"  class="col-controls">

              <button class="btn btn-round btn-default green lighten-2" title=""
                      ng-click="returnToResolve(concept)"><span
                class="md md-playlist-add "></span></button>
              <button class="btn btn-round btn-default black" title="" ng-click="addToEdit(concept)"><span
                class="md md-edit "></span>
              </button>
              <button class="btn btn-round btn-default blue lighten-2" title="" ng-click="showModel(concept)"><span
                class="md md-keyboard-return "></span>
              </button>
            </td>
          </tr>
        </table>
        <script type="text/ng-template" id="ng-table/headers/checkboxResolved.html">
          <input type="checkbox" ng-model="checkedResolved" ng-change="selectAll(actionTab, checkedResolved)"
                 id="select_all_resolved"
                 name="filter-checkbox" value=""/>
        </script>

      </div>
    </div>
  </div>
</section>

