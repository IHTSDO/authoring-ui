{
  // Concept Template v0.0.1
  // First draft of a json template for use by the frontend authoring application.
  // Supports ungrouped relationships, logical slots with ECL and lexical slots with text replacement.

  "metadata": {
    "name": "CT of X",
    "focusConcept": "71388002",
    "version": "1"
  },

  // Raw logical template included for reference. Uses the Expression Template Language.
  "logicalTemplate": [
    "71388002 |Procedure| :",
    "   [[~1..1]] {",
    "      260686004 |Method| = 312251004 |Computed tomography imaging action|,",
    "      [[~1..1]] 405813007 |Procedure site - Direct| = [[+id @slot-x (<< 442083009 |Anatomical or acquired body structure|)]]",
    "   }"],

  // Lexical (description) templates
  "lexicalTemplates": [
    // Each lexical template takes its initial value from a relationship target's FSN discarding the parenthesis.
    // Some parts of the term may need to be removed, e.g. removing "structure" from "Heart structure" .. whitespace should be trimmed after each replacement.
    {
      "name": "term-x",
      "takeFSNFromSlot": "slot-x",
      "removeParts": ["structure", "entire"]
    }
  ],

  // Json Concept Template
  "conceptTemplate": {

    // The relationships section is generated by the backend using the logical template.
    // All relationships assumed mandatory unless otherwise stated.
    "relationships": [
      {
        "characteristicType": "STATED_RELATIONSHIP",
        "groupId": 0,
        "type": {
          "conceptId": "116680003",
          "fsn": "Is a (attribute)"
        },
        "target": {
          "conceptId": "71388002",
          "fsn": "Procedure (procedure)"
        }
      },
      {
        "characteristicType": "STATED_RELATIONSHIP",
        "groupId": 1,
        "type": {
          "conceptId": "260686004",
          "fsn": "Method (attribute)"
        },
        "target": {
          "conceptId": "312251004",
          "fsn": "Computed tomography imaging - action (qualifier value)"
        }
      },
      {
        "characteristicType": "STATED_RELATIONSHIP",
        "groupId": 1,
        "type": {
          "conceptId": "405813007",
          "fsn": "Procedure site - Direct (attribute)"
        },

        // Logical template slot from logical template.
        "targetSlot": {
          "slotName": "slot-x",
          // Allowable range restricted by Expression Constraint Language.
          "allowableRangeECL": "<< 442083009"
          // This simple ECL query matches concept 442083009 and its descendants.
          // This is compatible with the ESCG queries implemented in Snow Owl.
        }
      }
    ],

    // The descriptions section will be handcrafted to start with.
    // Terms will be updated by the frontend as the relationship slots are filled in by the user.
    "descriptions": [
      {
        "type": "FSN",
        "lang": "en",
        // Terms contain placeholders for lexical template values e.g. {{term-x}}
        "term": "Computed tomography of {{term-x}} (procedure)",
        "caseSignificance": "INITIAL_CHARACTER_CASE_INSENSITIVE",
        "acceptabilityMap": {
          "900000000000508004": "PREFERRED",
          "900000000000509007": "PREFERRED"
        }
      },
      {
        "type": "SYNONYM",
        "lang": "en",
        "term": "CT of {{term-x}}",
        "caseSignificance": "ENTIRE_TERM_CASE_SENSITIVE",
        "acceptabilityMap": {
          "900000000000508004": "PREFERRED",
          "900000000000509007": "PREFERRED"
        }
      },
      {
        "type": "SYNONYM",
        "lang": "en",
        "term": "Computed tomography of {{term-x}}",
        "caseSignificance": "INITIAL_CHARACTER_CASE_INSENSITIVE",
        "acceptabilityMap": {
          "900000000000508004": "ACCEPTABLE",
          "900000000000509007": "ACCEPTABLE"
        }
      }
    ]
  }
}
