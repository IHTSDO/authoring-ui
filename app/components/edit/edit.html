<!-- Hide container until view is selected -->
<div class="sca-container" ng-if="thisView" style="">

  <!-- Control panel appears when elements are hidden -->
  <div class="button-nav">
    <!-- Create new concept -->
    <button ui-on-drop="dropConcept($data)" drop-channel="conceptPropertiesObj" drag-enter-class="sca-drag-target"
            type="button" ng-click="createConcept()"
            ng-disabled="task.status === 'Promoted' || !canCreateConcept"
            class="btn btn-default create-new-concept widget-toolbar tooltips-right tooltips-light normal-case">
      <div class="md fa fa-edit"></div>
      <span>Create New Concept</span></button>

    <!-- Switch to Classify View -->
    <button type="button"
            class="btn btn-default widget-toolbar green darken-1 tooltips-right tooltips-light normal-case"
            ng-click="setView('classification')"
            ng-disabled="!classificationContainer.id">
      <div class="md md-notifications"></div>
      <span>Switch to Classify View</span></button>

    <!-- Switch to Feedback/Review View -- Task View Only -->
    <button ng-if="taskKey"
            type="button" class="btn btn-default widget-toolbar review pink1 tooltips-right tooltips-light normal-case"

            ng-disabled="!task.feedbackMessagesStatus !== 'none'"
            ng-click="viewReview()">
      <div class="md md-email"></div>
      <span>Switch to Feedback View</span></button>

    <!-- Switch to Validate View -->
    <button type="button"
            class="btn btn-default widget-toolbar deep-purple lighten-1 validate tooltips-right tooltips-light normal-case"
            ng-click="setView('validation')"
            ng-disabled="task.latestValidationStatus !== 'COMPLETED'">
      <div class="md md-school"></div>
      <span>View the most recent Validation Report</span></button>

    <!-- Switch to Conflict View -->
    <!-- ng-class="[
    {'red' : conflictsContainer.conflicts.concepts.length > 0},
    {'grey lighten-3' : !conflictsContainer.conflicts.concepts || conflictsContainer.conflicts.concepts.length === 0}]"
    -->
    <button type="button"
            class="btn btn-default widget-toolbar red lighten-1 conflicts tooltips-right tooltips-light normal-case"
            ng-disabled="!canConflict"
            ng-click="setView('conflicts')">
      <div class="md md-sync-problem"></div>
      <span>Pull new changes from project</span></button>

    <!-- Promote -- Project only -->
    <button type="button"
            class="btn btn-default widget-toolbar blue lighten-1 conflicts tooltips-right tooltips-light normal-case"
            ng-if="!taskKey"
            ng-disabled="conflictsContainer.conflicts.concepts.length !== 0"
            class="blue"

            ng-click="promoteProject()">
      <div class="md md-call-merge"></div>
      <span>Promote this Project</span></button>

    <!-- Edit View: Default -- Task View Only -->
    <button ng-if="taskKey" type="button" ng-class="[{'lighten-2' : thisView === 'edit-default'}]"
            class="btn btn-default widget-toolbar blue tooltips-right tooltips-light normal-case"
            ng-click="setView('edit-default')">
      <div class="md md-dvr"></div>
      <span>Go back to task editing</span></button>

    <!-- Edit View:  No sidebar -- Task View Only -->
    <button ng-if="taskKey" type="button" ng-class="[{'lighten-2' : thisView === 'edit-no-sidebar'}]"
            class="btn btn-default widget-toolbar blue tooltips-right tooltips-light normal-case"
            ng-click="setView('edit-no-sidebar')">
      <div class="md md-web "></div>
      <span>Hide the left sidebar</span></button>

    <!-- Edit View: No model -- Task View Only -->
    <button ng-if="taskKey" type="button" ng-class="[{'lighten-2' : thisView === 'edit-no-model'}]"
            class="btn btn-default widget-toolbar blue tooltips-right tooltips-light normal-case"
            ng-click="setView('edit-no-model')">
      <div class="md md-grid-off"></div>
      <span>Hide all concept models</span></button>

  </div>

  <!-- Main page content -->
  <div class="row no-gutter" style="padding-left: 50px;">

    <!-- Default edit view -->
    <div ng-if="thisView === 'edit-default'">

      <!-- sidebar -->
      <div class="editpanel sca-column no-padding"
           ng-class="getLayoutWidths('sidebar')"
           ng-include src="'shared/sidebar-edit/sidebarEdit.html'"></div>

      <!-- models & concepts-->
      <div ng-class="getLayoutWidths('modelsAndConcepts')"
           class="no-padding  hide-scroll" sca-infinite-scroll="addMoreItems()"
           sca-infinite-scroll-disabled="conceptsRendering"
           sca-infinite-scroll-distance="1" sca-infinite-scroll-immediate-check="true">


        <!-- model & concept data-->
        <div class="row-fluid no-gutter" style="display: -webkit-box;
          display: -webkit-flex;
          display: -ms-flexbox;
          display: flex;"
             ng-repeat-start="concept in concepts | limitTo: conceptsDisplayed track by concept.conceptId"
             ng-class="isLast($last)"
             repeat-complete callback="renderingComplete()">

          <!-- model -->
          <div class="no-gutter " style="height: 100%" ng-class="getLayoutWidths('models')">
            <div draw-model-sca concept="concept"></div>
          </div>

          <!-- concept -->
          <div class="no-gutter grey darken-3 panel-height" ng-class="getLayoutWidths('concepts')"
               style="margin-right:0px;">
            <div concept-edit concept="concepts[$index]" id="height-{{concept.conceptId}}'"
                 branch="targetBranch" static="false" ui-state-update-fn="updateEditListUiState()"
                 save-function="conceptUpdateFunction(project, task, concept)"
              >
            </div>
          </div>

        </div>
        <div class="row-fluid no-gutter" style="display: -webkit-box;
          display: -webkit-flex;
          display: -ms-flexbox;
          display: flex; overflow:none;" ng-if="$last" ng-repeat-end>
          <div class="no-gutter" ng-class="getLayoutWidths('models')">
            <div class="modelScrollBox"></div>
          </div>

          <!-- concept -->
          <div class="no-gutter grey darken-3" fill-height ng-class="getLayoutWidths('concepts')"
               style="margin-right:0px;">
          </div>
        </div>


      </div>

    </div>

    <!-- Edit view with no sidebar -->
    <div ng-if="thisView === 'edit-no-sidebar'">

      <!-- models & concepts-->
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding ">


        <!-- model & concept data-->
        <div class="row no-padding no-gutter hide-scroll"
             sca-infinite-scroll="addMoreItems()" sca-infinite-scroll-disabled="conceptsRendering"
             sca-infinite-scroll-distance="1" sca-infinite-scroll-immediate-check="true">


          <!-- model & concept data-->
          <div class="row-fluid no-gutter" style="display: -webkit-box;
          display: -webkit-flex;
          display: -ms-flexbox;
          display: flex;"
               ng-repeat-start="concept in concepts | limitTo: conceptsDisplayed track by concept.conceptId"
               ng-class="isLast($last)"
               repeat-complete callback="renderingComplete()">

            <!-- model -->
            <div class="no-gutter col-md-7" style="height: 100%">
              <div draw-model-sca concept="concept"></div>
            </div>

            <!-- concept -->
            <div class="no-gutter grey darken-3 panel-height col-md-5"
                 style="margin-right:0px;">
              <div concept-edit concept="concepts[$index]" id="height-{{concept.conceptId}}'"
                   branch="targetBranch" static="false" ui-state-update-fn="updateEditListUiState()"
                   save-function="conceptUpdateFunction(project, task, concept)"
                >
              </div>
            </div>

          </div>
          <div class="row-fluid no-gutter" style="display: -webkit-box;
          display: -webkit-flex;
          display: -ms-flexbox;
          display: flex; overflow:none;" ng-if="$last" ng-repeat-end>
            <div class="no-gutter col-md-7">
              <div class="modelScrollBox"></div>
            </div>

            <!-- concept -->
            <div class="no-gutter grey darken-3 col-md-5" fill-height
                 style="margin-right:0px;">
            </div>

          </div>
          <div class="row-fluid no-gutter" style="display: -webkit-box;
          display: -webkit-flex;
          display: -ms-flexbox;
          display: flex; overflow:none;" ng-if="$last" ng-repeat-end>
            <div class="no-gutter col-sm-7 col-md-7 col-lg-7">
              <div class="modelScrollBox"></div>
            </div>

            <!-- concept -->
            <div class="no-gutter col-sm-5 col-md-5 col-lg-5 grey darken-3" fill-height style="margin-right:0px;">
            </div>
          </div>
        </div>


      </div>
    </div>

    <!-- Edit view with no model -->
    <div ng-if="thisView === 'edit-no-model'">

      <!-- sidebar -->
      <div class="editpanel sca-column col-lg-3 col-md-3 col-sm-3 no-padding"
           ng-include src="'shared/sidebar-edit/sidebarEdit.html'"></div>

      <!-- concepts-->
      <div class="col-lg-9 col-md-9 col-sm-9 no-padding hide-scroll"
           sca-infinite-scroll="addMoreItems()"
           sca-infinite-scroll-disabled="conceptsRendering"
           sca-infinite-scroll-distance="1" sca-infinite-scroll-immediate-check="true">


        <!-- concept data-->
        <div class="row-fluid no-gutter" style="display: -webkit-box;
          display: -webkit-flex;
          display: -ms-flexbox;
          display: flex;"
             ng-repeat-start="concept in concepts | limitTo: conceptsDisplayed track by concept.conceptId"
             ng-class="isLast($last)"
             repeat-complete callback="renderingComplete()">


          <!-- concept -->
          <div class="no-gutter grey darken-3 panel-height col-md-12"
               style="margin-right:0px;">
            <div concept-edit concept="concepts[$index]" id="height-{{concept.conceptId}}'"
                 branch="targetBranch" static="false" ui-state-update-fn="updateEditListUiState()"
                 save-function="conceptUpdateFunction(project, task, concept)"
              >
            </div>
          </div>

        </div>
        <div class="row-fluid no-gutter" style="display: -webkit-box;
          display: -webkit-flex;
          display: -ms-flexbox;
          display: flex; overflow:none;" ng-if="$last" ng-repeat-end>
          <!-- concept -->
          <div class="no-gutter grey darken-3 col-md-12" fill-height
               style="margin-right:0px;">
          </div>
        </div>


      </div>

    </div>

    <!-- Validation view -->
    <div ng-if="thisView === 'validation'">

      <!-- validation report -->
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no-padding">
        <div validation validation-container="validationContainer" branch="targetBranch" editable="true"></div>
      </div>

    </div>

    <!-- Classification view -->
    <div ng-if="thisView === 'classification'">

      <div class="row no-padding no-gutter">

        <!-- classification report -->
        <div class="col-md-12">
          <div classification classification-container="classificationContainer" branch="targetBranch"
               editable="true"></div>
        </div>
      </div>
    </div>


    <!-- Review/Feedback view -->
    <div ng-if="thisView === 'feedback'">

      <!-- feedback report -->
      <div
        class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no-padding">
        <div feedback feedback-container="feedbackContainer" branch="targetBranch" editable="true"></div>
      </div>

    </div>

    <!-- Conflict view -->
    <div ng-if="thisView === 'conflicts'">

      <!-- conflict report -->
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
        <div conflicts conflicts-container="conflictsContainer" target-branch="targetBranch"
             source-branch="sourceBranch"></div>
      </div>

    </div>

  </div>

</div>