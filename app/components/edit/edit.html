<style>
  .no-gutter {
    padding-left: 0px;
    padding-right: 0px;
  }
</style>

<!-- Hide container until view is selected -->
<div class="sca-container" ng-if="thisView" style="">

  <!-- Control panel appears when elements are hidden -->
  <div class="button-nav">

    <!-- Switch to Classify View -->
    <button type="button" class="btn btn-default widget-toolbar green darken-1" title="Switch to Classify View"
            style="width: 50px; height: 50px; margin: 0; padding: 0;"
            ng-click="setView('classification')"><span
      class="md md-notifications"></span></button>

    <!-- Switch to Feedback/Review View -->
    <button type="button" class="btn btn-default widget-toolbar review pink1 " title="Switch to Feedback View"
            style="width: 50px; height: 50px; margin: 0; padding: 0;"
            ng-click="setView('feedback')"><span
      class="md md-email"></span></button>

    <!-- Switch to Validate View -->
    <button type="button" class="btn btn-default widget-toolbar deep-purple lighten-1 validate"
            title="Switch to Validation View"
            style="width: 50px; height: 50px; margin: 0; padding: 0;"
            ng-click="setView('validation')"><span
      class="md md-school"></span></button>

    <!-- Switch to Conflict View -->
    <button type="button" class="btn btn-default widget-toolbar lighten-1 conflicts"
            ng-class="[
            {'red' : conflictsContainer.conflicts.concepts.length > 0},
            {'grey' : !conflictsContainer.conflicts.concepts || conflictsContainer.conflicts.concepts.length === 0}]"
            title="Switch to Resolve Conflicts View"
            style="width: 50px; height: 50px; margin: 0; padding: 0;"
            ng-click="setView('conflicts')"><span
      class="md md-warning"></span></button>

    <!-- Edit View: Default -->
    <button type="button" ng-class="{'lighten-2' : thisView === 'edit-default'}"
            class="btn btn-default widget-toolbar blue darken-4" title="Restore Default View"
            style="width: 50px; height: 50px; margin: 0; padding: 0;"
            ng-click="setView('edit-default')"> <span
      class="md md-dvr"></span></button>

    <!-- Edit View:  No sidebar -->
    <button type="button" ng-class="{'lighten-2' : thisView === 'edit-no-sidebar'}"
            class="btn btn-default widget-toolbar blue darken-3" title="Hide Sidebar"
            style="width: 50px; height: 50px; margin: 0; padding: 0;"
            ng-click="setView('edit-no-sidebar')"> <span
      class="md md-web "></span></button>

    <!-- Edit View: No model -->
    <button type="button" ng-class="{'lighten-2' : thisView === 'edit-no-model'}"
            class="btn btn-default widget-toolbar blue darken-2" title="Hide Model"
            style="width: 50px; height: 50px; margin: 0; padding: 0;"
            ng-click="setView('edit-no-model')"> <span
      class="md md-grid-off"></span></button>
    <button type="button" 
            class="btn btn-default widget-toolbar yellow darken-2" title="Rebase"
            style="width: 50px; height: 50px; margin: 0; padding: 0; position:fixed; bottom:38px; left:0px"
            ng-click="rebase()"> <span
      class="md md-autorenew"></span></button>
  </div>


  <!-- Main page content -->
  <div class="row no-gutter" style="padding-left: 50px;">

    <!-- Default edit view -->
    <div ng-if="thisView === 'edit-default'">

      <!-- sidebar -->
      <div class="editpanel sca-column col-lg-3 col-md-3 col-sm-3"
           ng-include src="'layout/sidebar-edit.html'"></div>


      <!-- models & concepts-->
      <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">

        <!-- headers -->
        <div class="row no-gutter">

          <!-- model header (blank) -->
          <div class="no-gutter col-sm-6 col-md-6 col-lg-6" style="height: 100%">
            &nbsp;
          </div>

          <!-- concept header (create new concept button) -->
          <div class="no-gutter col-sm-6 col-md-6 col-lg-6" style="margin-right:0px;">
            <button ui-on-drop="dropConcept($data)" drop-channel='conceptPropertiesObj'
                    type="button" ng-click="createConcept()"
                    class="btn-default btn-block create-new-concept"
                    title="Active"><i
              class="md md-add-circle pull-right"></i> Create New Concept
            </button>
          </div>
        </div>

        <!-- model & concept data-->
        <div class="row no-gutter" style="display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display:         flex;" ng-repeat="concept in concepts">

          <!-- model -->
          <div class="no-gutter col-sm-6 col-md-6 col-lg-6" style="height: 100%">
            <div draw-model class="modelScrollBox" concept="concept"></div>
          </div>

          <!-- concept -->
          <div class="no-gutter col-sm-6 col-md-6 col-lg-6 grey darken-3" style="margin-right:0px;">
            <div concept-edit concept="concept" id="height-{{concept.conceptId}}'"
                 branch="branch" static="false"
              >
            </div>
          </div>

        </div>
      </div>

    </div>

    <!-- Edit view with no sidebar -->
    <div ng-if="thisView === 'edit-no-sidebar'">

      <!-- models & concepts-->
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

        <!-- headers -->
        <div class="row no-gutter">

          <!-- model header (blank) -->
          <div class="no-gutter col-sm-7 col-md-7 col-lg-7" style="height: 100%">
            &nbsp;
          </div>

          <!-- concept header (create new concept button) -->
          <div class="no-gutter col-sm-5 col-md-5 col-lg-5" style="margin-right:0px;">
            <button ui-on-drop="dropConcept($data)" drop-channel='conceptPropertiesObj'
                    type="button" ng-click="createConcept()"
                    class="btn-default btn-block create-new-concept"
                    title="Active"><i
              class="md md-add-circle pull-right"></i> Create New Concept
            </button>
          </div>
        </div>

        <!-- model & concept data-->
        <div class="row no-gutter" style="display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display:         flex;" ng-repeat="concept in concepts">

          <!-- model -->
          <div class="no-gutter col-sm-7 col-md-7 col-lg-7" style="height: 100%">
            <div draw-model class="" concept="concept"></div>
          </div>

          <!-- concept -->
          <div class="no-gutter col-sm-5 col-md-5 col-lg-5 grey darken-3" style="margin-right:0px;">
            <div concept-edit concept="concept" id="height-{{concept.conceptId}}"
                 branch="branch" static="false"
              >
            </div>
          </div>

        </div>
      </div>


    </div>

    <!-- Edit view with no model -->
    <div ng-if="thisView === 'edit-no-model'">

      <!-- sidebar -->
      <div class="editpanel sca-column col-lg-3 col-md-3 col-sm-3"
           ng-include src="'layout/sidebar-edit.html'"></div>

      <!-- concepts-->
      <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">

        <!-- headers -->
        <div class="row no-gutter">
          <!-- concept header (create new concept button) -->
          <div class="no-gutter col-sm-12 col-md-12 col-lg-12" style="margin-right:0px;">
            <button ui-on-drop="dropConcept($data)" drop-channel='conceptPropertiesObj'
                    type="button" ng-click="createConcept()"
                    class="btn-default btn-block create-new-concept"
                    title="Active"><i
              class="md md-add-circle pull-right"></i> Create New Concept
            </button>
          </div>
        </div>

        <!-- model & concept data-->
        <div class="row no-gutter" style="display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display:         flex;" ng-repeat="concept in concepts">

          <!-- concept -->
          <div class="no-gutter col-sm-12 col-md-12 col-lg-12 " style="margin-right:0px;">
            <div concept-edit concept="concept" id="height-{{concept.conceptId}}"
                 branch="branch" static="false"
              >
            </div>
          </div>

        </div>
      </div>

    </div>

    <!-- Validation view -->
    <div ng-if="thisView === 'validation'">

      <!-- validation report -->
      <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8 col-xl-8">
        <div validation validation-container="validationContainer" branch="branch" editable="true"></div>
      </div>

      <!-- concept edit : non-static, can create -->
      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">

        <!-- headers -->
        <div class="row no-gutter">
          <!-- concept header (create new concept button) -->
          <div class="no-gutter col-sm-12 col-md-12 col-lg-12" style="margin-right:0px;">
            <button ui-on-drop="dropConcept($data)" drop-channel='conceptPropertiesObj'
                    type="button" ng-click="createConcept()"
                    class="btn-default btn-block create-new-concept"
                    title="Active"><i
              class="md md-add-circle pull-right"></i> Create New Concept
            </button>
          </div>
        </div>

        <!-- model & concept data-->
        <div class="row no-gutter" style="display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display:         flex;" ng-repeat="concept in concepts">

          <!-- concept -->
          <div class="no-gutter col-sm-12 col-md-12 col-lg-12" style="margin-right:0px;">
            <div concept-edit concept="concept" id="height-{{concept.conceptId}}"
                 branch="branch" static="false"
              >
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- Classification view -->
    <div ng-if="thisView === 'classification'">

      <!-- classification report -->
      <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8 col-xl-8">
        <div classification classification-container="classificationContainer" branch="branch" editable="true"></div>
      </div>

      <!-- concept edit : non-static, can create -->
      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">

        <!-- header -->
        <div class="row no-gutter">
          <!-- concept header (create new concept button) -->
          <div class="no-gutter col-sm-12 col-md-12 col-lg-12" style="margin-right:0px;">
            <button ui-on-drop="dropConcept($data)" drop-channel='conceptPropertiesObj'
                    type="button" ng-click="createConcept()"
                    class="btn-default btn-block create-new-concept"
                    title="Active"><i
              class="md md-add-circle pull-right"></i> Create New Concept
            </button>
          </div>
        </div>

        <!-- concept data-->
        <div class="row no-gutter" style="display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display:         flex;" ng-repeat="concept in concepts">

          <!-- concept -->
          <div class="no-gutter col-sm-12 col-md-12 col-lg-12" style="margin-right:0px;">
            <div concept-edit concept="concept" id="height-{{concept.conceptId}}"
                 branch="branch" static="false"
              >
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- Review/Feedback view -->
    <div ng-if="thisView === 'feedback'">

      <!-- feedback report -->
      <div
        class="col-xs-12 col-sm-12 col-md-8 col-lg-8 col-xl-8">
        <div feedback feedback-container="feedbackContainer" branch="branch" editable="true"></div>
      </div>

      <!-- concept edit : author -> non-static, can create, reviewer -> static, cannot create -->
      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">

        <!-- header -->
        <div class="row no-gutter">
          <!-- concept header (create new concept button) -->
          <div class="no-gutter col-sm-12 col-md-12 col-lg-12" style="margin-right:0px;">
            <button ui-on-drop="dropConcept($data)" drop-channel='conceptPropertiesObj'
                    type="button" ng-click="createConcept()"
                    class="btn-default btn-block create-new-concept"
                    title="Active"><i
              class="md md-add-circle pull-right"></i> Create New Concept
            </button>
          </div>
        </div>

        <!-- concept data-->
        <div class="row no-gutter" style="display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display:         flex;" ng-repeat="concept in concepts">

          <!-- concept -->
          <div class="no-gutter col-sm-12 col-md-12 col-lg-12" style="margin-right:0px;">
            <div concept-edit concept="concept" id="height-{{concept.conceptId}}"
                 branch="branch" static="false"
              >
            </div>
          </div>

        </div>
      </div>

    </div>

    <!-- Conflict view -->
    <div ng-if="thisView === 'conflicts'">

      <!-- conflict report -->
      <div class="col-xs-12 col-sm-12 col-md-5 col-lg-5 col-xl-5">
        <div conflicts conflicts-container="conflictsContainer" target-branch="branch"
             source-branch="projectBranch"></div>
      </div>

      <!-- base and branch concept pairs -->
      <div class="col-xs-12 col-sm-12 col-md-7 col-lg-7 col-xl-7">

        <div class="row no-gutter darken-3 grey" ng-repeat="conflictConceptPair in conflictConceptPairs">

          <!-- base concept -->
          <div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 col-xl-5 no-gutter">
            <div ng-if="conflictConceptPair.baseConcept" concept-edit concept="conflictConceptPair.baseConcept"
                 branch="conflictsSourceBranch" static="true">
            </div>
          </div>

          <!-- branch concept -->
          <div class="col-xs-7 col-sm-7 col-md-7 col-lg-7 col-xl-7 no-gutter">
            <div ng-if="conflictConceptPair.branchConcept" concept-edit concept="conflictConceptPair.branchConcept"
                 branch="conflictsTargetBranch" parent-branch="conflictsSourceBranch" static="false">
            </div>
          </div>
        </div>

      </div>


    </div>
    <!--

    OLD EDIT FORMAT, REFACTORED IN FAVOR OF DIRECT VIEW MANIPULATION
        &lt;!&ndash; Sidebar &ndash;&gt;
        <div ng-show="!hideSidebar" class="editpanel sca-column col-lg-3 col-md-3 col-sm-3"
             ng-include src="'layout/sidebar-edit.html'"></div>

        &lt;!&ndash;Validate View &ndash;&gt;
        <div ng-if="!hideValidation"
             ng-class="['col-sm-12',
             'col-md-12',
             'col-lg-8']">
          <div validation validation-container="validationContainer" branch="branch" editable="true"></div>
        </div>

        &lt;!&ndash; Feedback View &ndash;&gt;
        <div ng-if="!hideFeedback"
             ng-class="['col-sm-12',
             'col-md-12',
             'col-lg-8']">
          <div feedback feedback-container="feedbackContainer" branch="branch" editable="true"></div>
        </div>

        &lt;!&ndash; Classify View &ndash;&gt;
        <div ng-show="!hideClassification"
             ng-class="['col-sm-12',
             'col-md-8',
             'col-lg-8']">
          <div classification classification-container="classificationContainer" branch="branch" editable="true"></div>
        </div>

        &lt;!&ndash; Concept/Model &ndash;&gt;
        <div style="margin-right:0px; margin-bottom:38px;"
             class="row no-gutter"
             ng-class="[
             {'col-md-12' : thisView === 'edit-no-sidebar'},
             {'col-lg-12' : thisView === 'edit-no-sidebar'},
             {'col-lg-4' : thisView === 'classification' || thisView === 'validation' || thisView === 'feedback'},
             {'col-md-4' : thisView === 'classification' || thisView === 'validation' || thisView === 'feedback'},
             {'col-lg-9' : thisView === 'edit-no-model' || thisView === 'edit-default'},
             {'col-md-9' : thisView === 'edit-no-model' || thisView === 'edit-default'}]">

          &lt;!&ndash; create new concept header (displayed when no concepts in ng-repeat &ndash;&gt;
          <div ng-show="concepts.length === 0" class="row no-gutter">

            &lt;!&ndash; Blank separator for model view if appropriate &ndash;&gt;
            <div ng-show="!hideModel"
                 ng-class="['no-gutter',
                 'col-sm-7',
                 'col-md-7',
                 {'col-lg-7' : !hideSidebar},
                 {'col-md-7' : !hideSidebar},
                 {'col-md-8' : hideSidebar},
                 {'col-lg-8' : hideSidebar}]"
                 class="" style="height:100%;">
            </div>

            &lt;!&ndash; The create concept button &ndash;&gt;
            <div
              class="editing-form grey darken-3" ng-class="[
              {'col-md-12': thisView === 'edit-no-model'},
              {'col-lg-12': thisView === 'edit-no-model'},
              {'col-md-5': thisView != 'edit-no-model' && thisView != 'edit-no-sidebar'},
              {'col-lg-5': thisView != 'edit-no-model' && thisView != 'edit-no-sidebar'},
              {'col-lg-12' : thisView === 'classification' || thisView === 'validation' || thisView === 'feedback'},
              {'col-md-12' : thisView === 'classification' || thisView === 'validation' || thisView === 'feedback'},
              {'col-md-4' : hideSidebar}, {'col-lg-4' : hideSidebar}, 'no-gutter']" style="margin-right:0px;">

              <button ui-on-drop="dropConcept($data)" drop-channel='conceptPropertiesObj'
                      type="button" ng-click="createConcept()" class="btn-default btn-block create-new-concept"
                      title="Active"><i
                class="md md-add-circle pull-right"></i> Create New Concept
              </button>
            </div>
          </div>

          &lt;!&ndash; concept edit & model pairs &ndash;&gt;
          <div class="row no-gutter" ng-repeat="concept in concepts" >

            &lt;!&ndash; Model View:  always hidden during classification view &ndash;&gt;
            <div ng-show="!hideModel"
                 ng-class="['no-gutter',
                 'col-sm-7',
                 'col-md-7',
                 {'col-lg-7' : !hideSidebar},
                 {'col-md-7' : !hideSidebar},
                 {'col-md-8' : hideSidebar},
                 {'col-lg-8' : hideSidebar}]"
                 class="" style="height:100%;">

              &lt;!&ndash; models &ndash;&gt;
              <div draw-model class="modelScrollBox" concept="concept" ></div>
            </div>

            &lt;!&ndash; Edit Panel&ndash;&gt;
            <div class="col-xs-12 col-sm-12"
                 ng-class="[
              {'col-md-12': thisView === 'edit-no-model'},
              {'col-lg-12': thisView === 'edit-no-model'},
              {'col-md-5': thisView != 'edit-no-model' && thisView != 'edit-no-sidebar'},
              {'col-lg-5': thisView != 'edit-no-model' && thisView != 'edit-no-sidebar'},
              {'col-lg-12' : thisView === 'classification' || thisView === 'validation' || thisView === 'feedback'},
              {'col-md-12' : thisView === 'classification' || thisView === 'validation' || thisView === 'feedback'},
              {'col-md-4' : hideSidebar}, {'col-lg-4' : hideSidebar}, 'no-gutter']" style="margin-right:0px;">


              &lt;!&ndash; Create new concept banner (first element only) &ndash;&gt;
              <button ui-on-drop="dropConcept($data)" drop-channel='conceptPropertiesObj'
                      ng-show="$index === 0" type="button" ng-click="createConcept()"
                      class="btn-default btn-block create-new-concept"
                      title="Active"><i
                class="md md-add-circle pull-right"></i> Create New Concept
              </button>

              &lt;!&ndash; concepts &ndash;&gt;
              <div concept-edit concept="concept"
                   branch="branch" static="'false'"
                   >
              </div>
            </div>
          </div>
        </div>-->

  </div>

</div>