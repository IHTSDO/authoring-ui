<style>
  .template-added {
    background-color: #e49c2a;
  }

  .template-invalid {
    background-color: #db454e;
  }

  .template-valid {
    background-color: #03b18a;
  }

  .navigation-link {
    width: 50px;
    height: 50px;
  }

  ul.sub-navigation-link-list li {
    padding: 0;
  }

  ul.sub-navigation-link-list li ul li a {
    color: #fff;
  }

  ul.sub-navigation-link-list li ul {
    padding-left: 0px;
    position: relative;
    width: 300px;
    font-size: 13px !important;
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;
    display: none;
    opacity: 0;
    visibility: hidden;
    color: #fff !important;
  }

  ul.sub-navigation-link-list li ul li {
    background: #4fc3f7;
    display: block;
    color: #fff;
    padding: 12px 13px;
    line-height: 1;
  }

  ul.sub-navigation-link-list li ul li:hover {
    background: #409dc7;
  }

  ul.sub-navigation-link-list li:hover ul {
    display: block;
    opacity: 1;
    visibility: visible;
  }

  .sub-navigation-link-list {
    list-style-type: none;
  }

  ul.sub-navigation-link-list {
    -webkit-padding-start: 0px;
    margin-bottom: 0px;
    -webkit-margin-before: 0em;
    -webkit-margin-after: 0em;
    -webkit-margin-start: 0px;
    -webkit-margin-end: 0px;
    color: #fff;
  }

  ul.button-sub-nav {
    -webkit-padding-start: 0px;
    margin-bottom: 0px;
    -webkit-margin-before: 0em;
    -webkit-margin-after: 0em;
    -webkit-margin-start: 0px;
    -webkit-margin-end: 0px;
  }

  ul.button-sub-nav {
    margin-left: 50px;
    margin-top: -50px
  }

  .sub-navigation-link-list .btn {
    padding: 4px 0px;
    font-size: 13px;
    width: 50px;
    height: 50px;
    border-radius: 0px;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    color: #fff;
  }

  .sub-navigation-link-list .btn a {
    height: 50px
  }

  ul.button-sub-nav {
    padding-left: 0px;
  }

  /* classification */
  ul.classification-nav .btn:hover,
  ul.classification-nav li ul li:focus,
  ul.classification-nav li ul li:active,
  ul.classification-nav li ul li:hover {
    background: #03a07d;
  }

  ul.classification-nav li ul li {
    color: #fff;
    background: #55c1a7
  }

  /* validation */
  ul.validation-nav .btn:hover,
  ul.validation-nav li ul li:focus,
  ul.validation-nav li ul li:active,
  ul.validation-nav li ul li:hover {
    background: #57447e;
  }

  ul.validation-nav li ul li {
    color: #fff;
    background: #6c549d
  }

  /* review */

  .sca-light .navigation-link.green.darken-1.classify {
    color: #d33c75
  }

  ul.review-nav .btn:hover,
  ul.review-nav li ul li:focus,
  ul.review-nav li ul li:active,
  ul.review-nav li ul li:hover {
    background: #d33c75;
  }

  ul.review-nav li ul li {
    color: #fff;
    background: #e94281
  }

  ul.review-nav .btn:hover,
  ul.review-nav li ul li:focus,
  ul.review-nav li ul li:active,
  ul.review-nav li ul li:hover {
    background: #d33c75;
  }

  ul.review-nav li ul li {
    color: #fff;
    background: #e94281
  }

</style>

<!-- Hide container until view is selected -->
<div class="sca-container" ng-if="thisView" style="">

  <!-- Control panel appears when elements are hidden -->
  <div class="button-nav">

    <!-- Inactivation button (shown only if service has concept set) -->
    <!--
        <button
          type="button" ng-click="setView('inactivation')"
          ng-show="isInactivation"
          class="btn btn-default red widget-toolbar tooltips-right tooltips-light normal-case">
          <div class="md fa-sca fa-power-off"></div>
          <span>Inactivation</span></button>
    -->

    <!-- Create new concept (non-template) -->
    <button
      ui-on-drop="dropConcept($data)" drop-channel="conceptPropertiesObj" drag-enter-class="sca-drag-target"
      type="button" ng-click="createConcept()"
      ng-disabled="task.status === 'Promoted' || !canCreateConcept"
      class="btn btn-default create-new-concept widget-toolbar tooltips-right tooltips-light normal-case">
      <div class="md fa-sca fa-edit"></div>

      <span>Create New Concept</span></button>

    <!-- Create new template concept -->
    <button ui-on-drop="dropConcept($data)" drop-channel="conceptPropertiesObj" drag-enter-class="sca-drag-target"
            popover-template="'shared/template-service/templateSelect.html'"
            popover-placement="right"
            popover-trigger="click: click"
            popover-append-to-body="true"
            type="button"
            id="templateCreateBtn"
            ng-disabled="task.status === 'Promoted' || !canCreateConcept"
            ng-if="templates.length > 0"
            class="btn btn-default create-new-concept snodragon-templates widget-toolbar tooltips-right tooltips-light normal-case">
      <img src="images/snodragon.png" style="width:25px;">
      <span>Select SnoDragon Template</span></button>
    <div class="navigation-link green darken-1 classify">

      <ul class="sub-navigation-link-list classification-nav">
        <li>
          <a>
            <div class="home-link pointer btn "><i class="md md-notifications "></i>
            </div>
          </a>


          <ul class="button-sub-nav">


            <li ng-if="task.latestClassificationJson.status === 'COMPLETED'" ng-click="viewClassificationFromSidebar()">
              View Classification (completed {{classificationContainer.creationDate | date : 'medium'}}
            </li>
            <li ng-if="task.latestClassificationJson.status === 'FAILED'">
              Classification Failed
            </li>
            <li ng-if="task.latestClassificationJson.status === 'RUNNING'">
              Classification Running
            </li>
            <li ng-if="task.latestClassificationJson.status !== 'RUNNING'" ng-click="classify()"
                ng-disabled="task.status === 'Promoted' || task.latestClassificationJson.status === 'RUNNING' || role === 'REVIEWER' || branchLocked">
              Start New Classification
            </li>
          </ul>
        </li>

      </ul>

    </div>

    <div class="navigation-link deep-purple darken-2 validate">

      <ul class="sub-navigation-link-list validation-nav">
        <li>
          <a>
            <div class="home-link pointer btn btn-link withoutripple"><i class="md md-school "></i>
            </div>
          </a>

          <ul class="button-sub-nav">
            <li ng-if="task.latestValidationStatus === 'FAILED'">
              Validation Failed
            </li>
            <li
              ng-if="task.latestValidationStatus && (task.latestValidationStatus === 'RUNNING' || task.latestValidationStatus === 'BUILDING' || task.latestValidationStatus === 'SCHEDULED')">
              Validation Running
            </li>
            <li ng-if="task.latestValidationStatus === 'COMPLETED'" ng-click="viewValidationFromSidebar()">
              View Validation Report
            </li>
            <li
              ng-if="task.latestValidationStatus !== 'RUNNING' && task.latestValidationStatus !== 'BUILDING' && task.latestValidationStatus !== 'SCHEDULED'"
              ng-click="validate()"
              ng-disabled="task.latestValidationStatus === 'SCHEDULED' || task.status === 'Promoted' || task.latestValidationStatus === 'VALIDATING' || task.latestValidationStatus === 'RUNNING' || task.latestValidationStatus === 'BUILDING' || role === 'REVIEWER' || branchLocked">
              Start New Validation
            </li>
          </ul>
        </li>

      </ul>

    </div>

    <div class="navigation-link pink1 darken-2 review">

      <ul class="sub-navigation-link-list review-nav">
        <li>
          <a>
            <div class="home-link pointer btn btn-link withoutripple"><i class="md md-email "></i>
            </div>
          </a>
          <ul class="button-sub-nav">
            <li
              ng-if="role === 'AUTHOR' && (task.status === 'New' || task.status === 'In Progress') && !reviewChecks"
              ng-click="toggleReview()"
              ng-disabled="task.latestValidationStatus === 'SCHEDULED' || task.status === 'Promoted' || task.latestValidationStatus === 'VALIDATING' || task.latestValidationStatus === 'RUNNING' || task.latestValidationStatus === 'BUILDING' || role === 'REVIEWER' || branchLocked">
              Submit for Review
            </li>
            <li
              ng-if="role === 'AUTHOR' && (task.status === 'In Review' || task.status === 'Review Completed')"
              ng-click="toggleReview()">
              Cancel Review
            </li>
            <li ng-if="role === 'REVIEWER' && (task.status === 'In Review' || task.status === 'Review Completed')"
                ng-click="toggleReview()">
              Unclaim Review
            </li>
            <li ng-click="viewReviewFromSidebar()">
              View Review and Feedback
            </li>
          </ul>
        </li>

      </ul>

    </div>

    <button type="button"
            class="btn btn-default widget-toolbar amber lighten-1 conflicts tooltips-right tooltips-light normal-case"
            ng-disabled="!canConflict || branchLocked"
            ng-click="goToConflicts()">
      <div class="md md-sync"></div>
      <span>Pull new changes from project</span></button>

    <!-- Promote -- Project only -->
    <button type="button"
            class="btn btn-default widget-toolbar blue lighten-1 conflicts tooltips-right tooltips-light normal-case"
            ng-if="!taskKey"
            ng-disabled="conflictsContainer.conflicts.concepts.length !== 0"


            ng-click="promoteProject()">
      <div class="md md-call-merge"></div>
      <span>Promote this Project</span></button>

    <!-- Edit View: Default -- Task View Only -->
    <button ng-if="taskKey" type="button" ng-class="[{'lighten-2' : thisView === 'edit-default'}]"
            class="btn btn-default widget-toolbar blue tooltips-right tooltips-light normal-case"
            ng-click="setView('edit-default')">
      <div class="md md-dvr"></div>
      <span>Go back to task editing</span></button>

    <!-- Edit View:  No sidebar -- Task View Only -->
    <button ng-if="taskKey" type="button" ng-class="[{'lighten-2' : thisView === 'edit-no-sidebar'}]"
            class="btn btn-default widget-toolbar blue tooltips-right tooltips-light normal-case"
            ng-click="setView('edit-no-sidebar')">
      <div class="md md-web "></div>
      <span>Hide the left sidebar</span></button>

    <!-- Edit View: No model -- Task View Only -->
    <button ng-if="taskKey" type="button" ng-class="[{'lighten-2' : thisView === 'edit-no-model'}]"
            class="btn btn-default widget-toolbar blue tooltips-right tooltips-light normal-case"
            ng-click="setView('edit-no-model')">
      <div class="md md-grid-off"></div>
      <span>Hide all concept models</span></button>
    <!-- Edit View: No model -- Task View Only -->


  </div>
  <style>
    .fixed-height {
      position: fixed !important;
      padding-left: 0px !important;
      margin-left: -1px;
    }

    .scroll-if-height {
      overflow-y: auto;
      overflow-x: hidden;
    }
  </style>
  <!-- Main page content -->
  <div class="row no-gutter main-view-offset">


    <!-- Default edit view -->
    <div ng-if="thisView === 'edit-default'">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
        <!-- sidebar -->
        <div class="editpanel sca-column no-padding "

             ng-include src="'shared/sidebar-edit/sidebarEdit.html'"></div>

        <!-- models & concepts-->
        <div ng-class="getLayoutWidths('modelsAndConcepts')"
             class="no-padding hide-scroll pull-right" sca-infinite-scroll="addMoreItems()"
             sca-infinite-scroll-disabled="conceptsRendering"
             sca-infinite-scroll-distance="1" sca-infinite-scroll-immediate-check="true">


          <!-- model & concept data-->
          <div class="row-fluid no-gutter" style="display: -webkit-box;
          display: -webkit-flex;
          display: -ms-flexbox;
          display: flex;"
               ng-repeat-start="concept in concepts | limitTo: conceptsDisplayed track by concept.conceptId"
               ng-class="isLast($last)"
               repeat-complete callback="renderingComplete()">

            <!-- model -->
            <div class="no-gutter " style="height: 100%" ng-class="getLayoutWidths('models')">
              <div draw-model-sca concept="concept" snf-function="getSNF(concept.conceptId)" display-snf="true"></div>
            </div>

            <!-- concept -->
            <div class="no-gutter grey darken-3 panel-height" ng-class="getLayoutWidths('concepts')"
                 style="margin-right:0px;">

              <div concept-edit concept="concepts[$index]" id="height-{{concept.conceptId}}'"
                   branch="targetBranch" static="branchLocked || !isOwnTask"
                   ui-state-update-fn="updateEditListUiState()">
              </div>
            </div>

          </div>
          <div class="row-fluid no-gutter" style="display: -webkit-box;
          display: -webkit-flex;
          display: -ms-flexbox;
          display: flex; overflow:none;" ng-if="$last" ng-repeat-end>
            <div class="no-gutter" ng-class="getLayoutWidths('models')">
              <div class="modelScrollBox"></div>
            </div>

            <!-- concept -->
            <div class="no-gutter grey darken-3" fill-height ng-class="getLayoutWidths('concepts')"
                 style="margin-right:0px;">
            </div>
          </div>


        </div>
      </div>
    </div>

    <!-- Edit view with no sidebar -->
    <div ng-if="thisView === 'edit-no-sidebar'">

      <!-- models & concepts-->
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding ">


        <!-- model & concept data-->
        <div class="row no-padding no-gutter hide-scroll"
             sca-infinite-scroll="addMoreItems()" sca-infinite-scroll-disabled="conceptsRendering"
             sca-infinite-scroll-distance="1" sca-infinite-scroll-immediate-check="true">


          <!-- model & concept data-->
          <div class="row-fluid no-gutter" style="display: -webkit-box;
          display: -webkit-flex;
          display: -ms-flexbox;
          display: flex;"
               ng-repeat-start="concept in concepts | limitTo: conceptsDisplayed track by concept.conceptId"
               ng-class="isLast($last)"
               repeat-complete callback="renderingComplete()">

            <!-- model -->
            <div class="no-gutter col-md-7" style="height: 100%">
              <div draw-model-sca concept="concept" snf-function="getSNF(concept.conceptId)" display-snf="true"></div>
            </div>

            <!-- concept -->
            <div class="no-gutter grey darken-3 panel-height col-md-5"
                 style="margin-right:0px;">
              <div concept-edit concept="concepts[$index]" id="'height-{{concept.conceptId}}'"
                   branch="targetBranch" static="branchLocked || !isOwnTask"
                   ui-state-update-fn="updateEditListUiState()"
              >
              </div>
            </div>

          </div>
          <div class="row-fluid no-gutter" style="display: -webkit-box;
          display: -webkit-flex;
          display: -ms-flexbox;
          display: flex; overflow:none;" ng-if="$last" ng-repeat-end>
            <div class="no-gutter col-md-7">
              <div class="modelScrollBox"></div>
            </div>

            <!-- concept -->
            <div class="no-gutter grey darken-3 col-md-5" fill-height
                 style="margin-right:0px;">
            </div>

          </div>
          <div class="row-fluid no-gutter" style="display: -webkit-box;
          display: -webkit-flex;
          display: -ms-flexbox;
          display: flex; overflow:none;" ng-if="$last" ng-repeat-end>
            <div class="no-gutter col-sm-7 col-md-7 col-lg-7">
              <div class="modelScrollBox"></div>
            </div>

            <!-- concept -->
            <div class="no-gutter col-sm-5 col-md-5 col-lg-5 grey darken-3" fill-height style="margin-right:0px;">
            </div>
          </div>
        </div>


      </div>
    </div>

    <!-- Edit view with no model -->
    <div ng-if="thisView === 'edit-no-model'">

      <!-- sidebar -->
      <div class="editpanel sca-column col-lg-3 col-md-3 col-sm-3 fixed-height no-padding"
           ng-include src="'shared/sidebar-edit/sidebarEdit.html'"></div>

      <!-- concepts-->
      <div class="col-lg-9 col-md-9 col-sm-9 pull-right no-padding hide-scroll"
           sca-infinite-scroll="addMoreItems()"
           sca-infinite-scroll-disabled="conceptsRendering"
           sca-infinite-scroll-distance="1" sca-infinite-scroll-immediate-check="true">


        <!-- concept data-->
        <div class="row-fluid no-gutter" style="display: -webkit-box;
          display: -webkit-flex;
          display: -ms-flexbox;
          display: flex;"
             ng-repeat-start="concept in concepts | limitTo: conceptsDisplayed track by concept.conceptId"
             ng-class="isLast($last)"
             repeat-complete callback="renderingComplete()">


          <!-- concept -->
          <div class="no-gutter grey darken-3 panel-height col-md-12"
               style="margin-right:0px;">
            <div concept-edit concept="concepts[$index]" id="height-{{concept.conceptId}}'"
                 branch="targetBranch" static="branchLocked || !isOwnTask" ui-state-update-fn="updateEditListUiState()"
            >
            </div>
          </div>

        </div>
        <div class="row-fluid no-gutter" style="display: -webkit-box;
          display: -webkit-flex;
          display: -ms-flexbox;
          display: flex; overflow:none;" ng-if="$last" ng-repeat-end>
          <!-- concept -->
          <div class="no-gutter grey darken-3 col-md-12" fill-height
               style="margin-right:0px;">
          </div>
        </div>


      </div>

    </div>


    <!-- Validation view -->
    <div ng-if="thisView === 'validation'">

      <!-- validation report -->
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no-padding">
        <div validation validation-container="validationContainer" branch="targetBranch" editable="true"></div>
      </div>

    </div>

    <!-- Inactivation view -->
    <div ng-if="thisView === 'inactivation'">

      <!-- sidebar -->
      <div class="editpanel sca-column no-padding "

           ng-include src="'shared/sidebar-edit/sidebarEdit.html'"></div>

      <div class="row no-padding no-gutter">

        <div class="col-md-3">
          <!-- sidebar -->
          <!--<div class="editpanel sca-column no-padding" ng-include src="'shared/sidebar-edit/sidebarEdit.html'">
          </div>-->
        </div>

        <!-- inactivation screen -->
        <div class="col-md-9">
          <div inactivation inactivation-concept="inactivationConcept" branch="targetBranch"></div>
        </div>
      </div>
    </div>


    <!-- Classification view -->
    <div ng-if="thisView === 'classification'">

      <div class="row no-padding no-gutter">

        <!-- classification report -->
        <div class="col-md-12">
          <div classification classification-container="classificationContainer" branch="targetBranch"
               editable="true"></div>
        </div>
      </div>
    </div>


    <!-- Review/Feedback view -->
    <div ng-if="thisView === 'feedback'">

      <!-- feedback report -->
      <div
        class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no-padding">
        <div feedback feedback-container="feedbackContainer" branch="targetBranch" editable="true"></div>
      </div>

    </div>

    <!-- Conflict view -->
    <div ng-if="thisView === 'conflicts'">

      <!-- conflict report -->
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
        <div conflicts conflicts-container="conflictsContainer" target-branch="targetBranch"
             source-branch="sourceBranch"></div>
      </div>

    </div>

  </div>

</div>
