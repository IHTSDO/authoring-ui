<div ng-include src="'layout/header.html'"></div>

<!-- Hide container until view is selected -->
<div class="sca-container" ng-if="thisView" style="">

  <!-- Control panel appears when elements are hidden -->
  <div style="position:fixed; top:66px; bottom:0px; background-color: grey; width: 50px;">

    <!-- edit view controls -->
    <div ng-show="hideClassification">

      <!-- Switch to Classify View -->
      <button type="button" class="btn btn-default widget-toolbar green darken-1" title="Switch to Classify View"
              style="width: 50px; height: 50px; margin: 0; padding: 0;"
              ng-click="setView('classification')"><span
        class="md md-notifications"></span></button>

      <!-- Switch to Validate View -->
      <button type="button" class="btn btn-default widget-toolbar deep-purple lighten-1" title="Switch to Classify View"
              style="width: 50px; height: 50px; margin: 0; padding: 0;"
              ng-click="setView('validation')"><span
        class="md md-school"></span></button>

      <!-- Edit View: Default -->
      <button type="button" ng-class="{'lighten-2' : thisView === 'edit-default'}"
              class="btn btn-default widget-toolbar light-blue" title="Restore Default View"
              style="width: 50px; height: 50px; margin: 0; padding: 0;"
              ng-click="setView('edit-default')" ng-show="hideClassification"><span
        class="md md-dashboard"></span></button>

      <!-- Edit View:  No sidebar -->
      <button type="button" ng-class="{'lighten-2' : thisView === 'edit-no-sidebar'}"
              class="btn btn-default widget-toolbar light-blue darken-2" title="Hide Sidebar"
              style="width: 50px; height: 50px; margin: 0; padding: 0;"
              ng-click="setView('edit-no-sidebar')" ng-show="hideClassification"><span
        class="md md-assignment-return "></span></button>

      <!-- Edit View: No model -->
      <button type="button" ng-class="{'lighten-2' : thisView === 'edit-no-model'}"
              class="btn btn-default widget-toolbar blue darken-1" title="Hide Model"
              style="width: 50px; height: 50px; margin: 0; padding: 0;"
              ng-click="setView('edit-no-model')" ng-show="hideClassification"><span
        class="md md-now-widgets"></span></button>
    </div>

    <div ng-show="!hideClassification">
      <!-- Switch to Edit View (note, use last state) -->
      <button type="button" class="btn btn-default widget-toolbar blue" title="Switch to Edit View"
              style="width: 50px; height: 50px; margin: 0; padding: 0;"
              ng-click="setView('edit')"><span
        class="md md-edit"></span></button>

    </div>

  </div>

  <!-- Main page content -->
  <div class="row no-gutter" style="padding-left: 50px;">

    <!-- Sidebar -->
    <div ng-show="!hideSidebar" class="editpanel sca-column col-lg-3 col-md-3 col-sm-3"
         ng-include src="'layout/sidebar-edit.html'"></div>

    <!--Validate View -->
    <div ng-show="!hideValidation"
         ng-class="['col-sm-12','col-md-12', {'col-lg-5' : !hideSidebar}, {'col-lg-8' : hideSidebar}]">
      <div validation validation-id="validation.id" task-key="taskKey" projectKey="projectKey"
           branch="branch"></div>
    </div>


    <!-- Classify View -->
    <div ng-show="!hideClassification"
         ng-class="['col-sm-12',
         'col-md-12',
         {'col-lg-5' : !hideSidebar}, {'col-lg-8' : hideSidebar}]">
      <div classification classification-id="classification.id" task-key="taskKey" projectKey="projectKey"
           branch="branch"></div>
    </div>
    <div style="margin-right:0px; margin-bottom:38px;"
         class="row no-gutter"
         ng-class="[
         {'col-md-12' : hideSidebar && hideClassification && hideValidation},
         {'col-lg-12' : hideSidebar && hideClassification && hideValidation},
         {'col-lg-4' : !hideClassification && !hideValidation},
         {'col-md-4' : !hideClassification && !hideValidation},
         {'col-lg-9' : hideClassification && hideValidation},
         {'col-md-9' : hideClassification && hideValidation}]">

      <!-- create new concept header (displayed when no concepts in ng-repeat -->
      <div ng-show="concepts.length === 0" class="row no-gutter">

        <!-- Blank separator for model view if appropriate -->
        <div ng-show="!hideModel"
             ng-class="['no-gutter', 'col-sm-7','col-md-7', {'col-lg-7' : !hideSidebar}, {'col-md-7' : !hideSidebar}, {'col-md-8' : hideSidebar}, {'col-lg-8' : hideSidebar}]"
             class="" style="height:100%;">
        </div>

        <!-- The create concept button -->
        <div class="editing-form grey darken-3" ng-class="[
          {'col-md-12': thisView === 'edit-no-model' && hideClassification},
          {'col-lg-12': thisView === 'edit-no-model' && hideClassification},
          {'col-md-5': thisView != 'edit-no-model' && !hideSidebar},
          {'col-lg-5': thisView != 'edit-no-model' && !hideSidebar},
          {'col-lg-4' : !hideClassification || !hideValidation},
          {'col-md-4' : !hideClassification || !hideValidation},
          {'col-md-4' : hideSidebar}, {'col-lg-4' : hideSidebar}, 'no-gutter']" style="margin-right:0px;">

          <button type="button" ng-click="createConcept()" class="btn-default btn-block create-new-concept"
                  title="Active"><i
            class="md md-add-circle pull-right"></i> Create New Concept
          </button>
        </div>
      </div>

      <!-- concept edit & model pairs -->
      <div class="row  no-gutter" ng-repeat="concept in concepts" id="concept-{{concept.conceptId}}">

        <!-- Model View:  always hidden during classification view -->
        <div ng-show="!hideModel"
             ng-class="['no-gutter', 'col-sm-7','col-md-7', {'col-lg-7' : !hideSidebar}, {'col-md-7' : !hideSidebar}, {'col-md-8' : hideSidebar}, {'col-lg-8' : hideSidebar}]"
             class="" style="height:100%;">

          <!-- models -->
          <div draw-model style="" concept="concept" id="drawModel{{concept.conceptId}}"></div>
        </div>

        <!-- Edit Panel-->
        <div class="col-xs-12 col-sm-12" ng-class="[
          {'col-md-12': thisView === 'edit-no-model' && hideClassification && hideValidation},
          {'col-lg-12': thisView === 'edit-no-model' && hideClassification && hideValidation},
          {'col-md-5': thisView != 'edit-no-model' && !hideSidebar},
          {'col-lg-5': thisView != 'edit-no-model' && !hideSidebar},
          {'col-lg-4' : !hideClassification || !hideValidation},
          {'col-md-4' : !hideClassification || !hideValidation},
          {'col-md-4' : hideSidebar}, {'col-lg-4' : hideSidebar}, 'no-gutter']">

          <!-- Create new concept banner (first element only) -->
          <button ng-show="$index === 0" type="button" ng-click="createConcept()"
                  class="btn-default btn-block create-new-concept"
                  title="Active"><i
            class="md md-add-circle pull-right"></i> Create New Concept
          </button>

          <!-- concepts -->
          <div concept-edit ctrl-fn="showModel(arg, arg2)" concept="concept"
               editList="editPanelUiState" branch="branch"
               id="editPanel-{{concept.conceptId}}">
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
</div>